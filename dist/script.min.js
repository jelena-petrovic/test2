function validateMacField(){return macField=$("#macAddress"),void 0===macField.val()||""===macField.val()?(macField.addClass("empty"),!1):(macField.removeClass("empty"),macField.val().match("^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$")?(macField.removeClass("error"),!0):(macField.addClass("error"),!1))}function validateContractField(){return contractField=$("#contractId"),void 0===contractField.val()||""===contractField.val()?(contractField.addClass("empty"),!1):(contractField.removeClass("empty"),contractField.val().match("[0-9]+")?(contractField.removeClass("error"),!0):(contractField.addClass("error"),!1))}function select1Day(){var t=new Date;t.setDate(t.getDate()-1),$("#datepicker").datepicker("setDate",t),$("#datepicker2").datepicker("setDate",new Date)}function select7Days(){var t=new Date;t.setDate(t.getDate()-7),$("#datepicker").datepicker("setDate",t),$("#datepicker2").datepicker("setDate",new Date)}function generateRandomData(t){if(void 0===t)return[];for(var e=t.length,a=new Array(e),r=100,n=0,o=0;o<e-1;o++)rand=Math.floor(Math.random()*Math.min(r,98))+1,rand>n&&(n=rand),a[o]=rand,r-=rand;n<r&&(n=r),a[e-1]=r,a=shuffle(a);var i=0,s=new Array(e);for(o=0;o<e;o++)s[o]={name:t[o],y:a[o]},a[o]===n&&(i=o);return{max:n,max_index:i,data:s}}function shuffle(t){for(var e,a,r=t.length;0!==r;)a=Math.floor(Math.random()*r),e=t[r-=1],t[r]=t[a],t[a]=e;return t}function reloadTables(){$("#tablesContent").load("/parts/tables.html",function(t){$(".randomValue").each(function(){min=$(this).data("random-min"),max=$(this).data("random-max"),rand=Math.floor(Math.random()*(max-min))+min,$(this).html(rand)}),$(".chartContainer").each(function(){var n=$(this).data("chart-colors");Highcharts.setOptions({colors:n});var o=generateRandomData($(this).data("chart-labels")),i=$(this);new Highcharts.Chart({chart:{renderTo:this,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:""},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{innerSize:"55%",allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},legend:{layout:"vertical",align:"left",verticalAlign:"top",y:30,navigation:{enabled:!1},adjustChartSize:!0,labelFormatter:function(){return this.name+" ("+Math.round(this.percentage)+"%)"}},series:[{name:"",colorByPoint:!0,data:o.data}]},function(t){var e=t.plotLeft+.5*t.plotWidth,a=t.plotTop+.5*t.plotHeight,r='<span class="pieInfoText" style="position:absolute; text-align:center;">';r+='<span style="font-size: 16px; color: '+n[o.max_index]+'; font-weight: bold;">'+o.max+"%</span>",r+="</span>",i.siblings(".addText").append(r),(r=i.parent().find(".pieInfoText")).css("left",e+-.5*r.width()),r.css("top",a+-.5*r.height())})})})}function reloadGraphs(){$("#graphsContent").load("/parts/graphs.html",function(t){Highcharts.chart("status",{chart:{type:"areaspline"},dateTimeLabelFormats:{day:"%H:%M"},title:{text:""},xAxis:{type:"datetime"},yAxis:{title:{text:"GB"}},plotOptions:{series:{pointStart:Date.UTC(2018,5,28,6,0),pointInterval:36e5}},tooltip:{xDateFormat:"%e. %B %H:%M"},series:[{name:"Data transfered",data:[130,80,30,50,80,20,110,160,40,120,70,90,80,30,130,100,80],color:"#C3FAFE"},{type:"spline",name:"Total no. of unify clients",data:[0,120,30,80,70,90,40,130,50,60,155,70,140,60,70,130,120],color:"#004777"}]}),Highcharts.chart("status2",{chart:{type:"areaspline"},dateTimeLabelFormats:{day:"%H:%M"},title:{text:""},xAxis:{type:"datetime"},yAxis:{title:{text:"No. of clients"}},plotOptions:{series:{pointStart:Date.UTC(2018,5,28,6,0),pointInterval:36e5}},tooltip:{xDateFormat:"%e. %B %H:%M"},series:[{data:[210,90,170,210,90,190,130,70,120,90,60,90,210,110,90,100,0],color:"#FF9C9A",name:"Bad"},{data:[130,60,120,20,70,50,110,30,110,60,40,80,130,70,80,60,0],color:"#FBD28E",name:"Medium"},{data:[60,20,50,10,30,20,50,15,30,10,30,40,30,50,10,40,0],color:"#20FC8F",name:"Good"}]}),$(".interference").each(function(){new Highcharts.Chart({chart:{type:"column",renderTo:this},title:{text:""},xAxis:{categories:["1","2","3","4","5","6","7","8","9","10","11","12","13"],crosshair:!0},yAxis:{min:0,max:200,tickLength:50,title:{text:"No. of clients"}},xAxis:{min:1,title:{text:"Teritorial Directions"}},tooltip:{headerFormat:'<span style="font-size: 10px">Channel: {point.key}</span><br/>',xDateFormat:"%e. %B %H:%M"},plotOptions:{column:{pointPadding:.2,borderWidth:0},series:{borderRadius:3,pointWidth:10,groupPadding:.9}},series:[{name:"A",data:[140,130,140,70,70,110,130,180,160,120,162,145,110,95],color:"#8EF8FF"},{name:"B",data:[100,100,100,130,90,90,100,140,150,140,185,175,93,97],color:"#00C2E2"},{name:"C",data:[60,70,190,160,80,130,190,120,130,142,130,132,147,122],color:"#006799"},{name:"D",data:[120,126,170,195,85,105,170,155,190,144,140,128,125,118],color:"#0088BC"}]})}),$(".bitrate").each(function(){var t=$(this).data("graph-colors");new Highcharts.Chart({chart:{type:"spline",renderTo:this},dateTimeLabelFormats:{day:"%H:%M"},title:{text:""},xAxis:{type:"datetime"},yAxis:{title:{text:"Mbps"}},plotOptions:{series:{pointStart:Date.UTC(2018,5,28,6,0),pointInterval:36e5}},tooltip:{xDateFormat:"%e. %B %H:%M"},series:[{data:[210,90,170,210,90,190,130,70,120,90,60,90,210,110,90,100,0],color:t[0],name:"Max"},{data:[130,60,120,20,70,50,110,30,110,60,40,80,130,70,80,60,0],color:t[1],name:"Average"},{data:[60,20,50,10,30,20,50,15,30,10,30,40,30,50,10,40,0],color:t[2],name:"Min"}]})}),Highcharts.chart("retransmission",{dateTimeLabelFormats:{day:"%H:%M"},title:{text:""},xAxis:{type:"datetime"},yAxis:{title:{text:""},labels:{formatter:function(){return this.value/1e3+"k"}},min:0,max:14e4},plotOptions:{series:{pointStart:Date.UTC(2018,5,28,6,0),pointInterval:36e5}},tooltip:{xDateFormat:"%e. %B %H:%M"},series:[{data:[0,0,0,71e3,0,0,0,35e3,71e3,35e3,0,0,0,0,0,71e3,0],color:"#0088BC",name:"Bytes"},{data:[0,0,0,3e4,0,0,0,0,3e4,0,0,0,0,0,0,3e4,0],color:"#00C2E2",name:"Retransmitted bytes"}]}),Highcharts.chart("clients",{chart:{type:"areaspline"},dateTimeLabelFormats:{day:"%H:%M"},title:{text:""},xAxis:{type:"datetime"},yAxis:{title:{text:"No. of clients"}},plotOptions:{series:{pointStart:Date.UTC(2018,5,28,6,0),pointInterval:36e5}},legend:{enabled:!1},tooltip:{xDateFormat:"%e. %B %H:%M"},series:[{name:"No. of clients",data:[13,9,2,5,4,8,9,17,5,14,12,11,14,4,19,6,17],color:"#C3FAFE"}]})})}function reloadTabs(){reloadTables(),reloadGraphs()}$(function(){var a;$.getJSON("/data/contracts.json",function(t){a=t,macs=$.map(a,function(t){return t.mac}),$("#macAddress").autocomplete({source:macs,change:function(){if(validateMacField()){var e=$(this).val();matching_contracts=$.map(a,function(t){if(t.mac===e)return t.contract}),0<matching_contracts.length&&$("#contractId").val(matching_contracts[0]).removeClass("empty error")}}}),contracts_list=$.map(a,function(t){return t.contract}),$("#contractId").autocomplete({source:contracts_list,change:function(){if(validateContractField()){var e=$(this).val();matching_macs=$.map(a,function(t){if(t.contract===e)return t.mac}),0<matching_macs.length&&$("#macAddress").val(matching_macs[0]).removeClass("empty error")}}})}),$("#applyFilters").click(function(){return ret=validateMacField(),ret=validateContractField()&&ret,ret?($("#errorMessage").hide(),$("#selectedMac").html($("#macAddress").val()),$("#selectedContract").html($("#contractId").val()),$(".moreInfoWrap").slideDown("slow"),$(".searchForWrapper").slideUp("slow"),select1Day(),reloadTabs()):$("#errorMessage").show(),!1}),$("#resetFilter").click(function(){return $(".searchForWrapper").slideDown("slow"),$(".moreInfoWrap").slideUp("slow"),$("#macAddress, #contractId").val(""),$("#tablesContent, #graphsContent").html(""),!1}),$("#datepicker").datepicker({numberOfMonths:2,dateFormat:"dd.mm.yy",onSelect:function(t,e){reloadTabs(),$(".sevenDays, .oneDay").removeClass("active")}}),$("#datepicker2").datepicker({numberOfMonths:2,dateFormat:"dd.mm.yy",onSelect:function(t,e){reloadTabs(),$(".sevenDays, .oneDay").removeClass("active")}}),$(".oneDay").click(function(){return select1Day(),$(this).addClass("active"),$(".sevenDays").removeClass("active"),reloadTabs(),!1}),$(".sevenDays").click(function(){return select7Days(),$(this).addClass("active"),$(".oneDay").removeClass("active"),reloadTabs(),!1})}),$(function(){$(document).on("click",".infoButton",function(){return $(this).parent().siblings(".innerContent").slideToggle(),$(this).children("i").toggleClass("fa-angle-up fa-angle-down"),!1})});